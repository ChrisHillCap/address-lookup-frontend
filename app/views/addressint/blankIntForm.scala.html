@*
* Copyright 2016 HM Revenue & Customs
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*@
@import address.ViewConfig
@(tag: String,
  view: ViewConfig,
  intAddrForm: Form[address.international.IntAddressData],
  noMatchesWereFound: Boolean,
  exceededLimit: Boolean)(implicit request: Request[_], messages: Messages)

@import uk.gov.hmrc.play.views.html.helpers

@main_template(view = view, bodyClasses = Some("entry-form")) {

<div>
    <h1 class="heading-xlarge">@{view.baseTitle}</h1>

    <legend class="visuallyhidden">@{view.prompt}</legend>

    <label class="form-label-bold" for="location">@{view.prompt}</label>
    <fieldset class="inline">
        <div class="form-group" id="location">
            <label class="block-label" data-target="UK-Tab" for="location-UK">
                <input id="location-UK" type="radio" name="radio-inline-group" value="UK" />
                United Kingdom
            </label>

            <label class="block-label" data-target="INT-Tab" for="location-international">
                <input id="location-international" type="radio" name="radio-inline-group" value="INT" checked="checked" />
                International
            </label>

            <label class="block-label" data-target="BFPO-Tab" for="location-BFPO">
                <input id="location-BFPO" type="radio" name="radio-inline-group" value="BFPO" />
                BFPO
            </label>
        </div>

        <div class="panel panel-border-narrow" id='UK-Tab'>
        @helpers.form( address.uk.routes.UkAddressLookupController.postUkForm(tag), 'id -> "myForm" ) {
            <input type='hidden' id='guid' name='guid' value='@intAddrForm("guid").value.get' />
            <input type='hidden' id='continue-url' name='continue-url' value='@intAddrForm("continue-url").value.get' />
            <input type='hidden' id='prev-country' name='preev-country' value='@intAddrForm("prev-country").value' />

            <dl  class=' @if(intAddrForm("country").hasErrors) {error}'  >

                <label class="form-label-bold" for="country">Country</label>

                @intAddrForm("int-country").errors.map { err =>
                    <dd class="form-hint">@err.message</dd>
                }


                <select name="country" id="country" autofocus="autofocus" autocorrect="off" autocomplete="off" >
                @for( c <- address.Countries.countries ) {
                    <option value='@c.name' data-alternative-spellings='@{c.alternative}' data-relevancy-booster='@{c.relevance.getOrElse("1.0")}' @{"selected=selected".when(intAddrForm("int-country").value == Some(c.name) )} >@c.name</option>
                }
                </select>

            </dl>

            @helper.textarea(intAddrForm("address"), 'rows -> 5, '_label -> "Address")

            <div class="form-group">
                <button type="submit" name="submit" value="continue">Continue</button>
            </div>
        }
        </div>
    </fieldset>

</div>
}
